# ğŸ¯ Buddy System Architecture Diagram

## High-Level System

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     BUDDY AI SYSTEM                 â”‚
                    â”‚   (Collaborative Development)        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                             â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   ğŸ’¬ CHAT   â”‚            â”‚  ğŸ”§ SANDBOX    â”‚
              â”‚ INTERFACE   â”‚            â”‚  WORKSHOP      â”‚
              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                             â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                        â”‚   â”‚                        â”‚
          â”‚  - Questions           â”‚   â”‚  - Code Reviews        â”‚
          â”‚  - Explanations        â”‚   â”‚  - Feature Building    â”‚
          â”‚  - Reasoning           â”‚   â”‚  - Live Preview        â”‚
          â”‚  - Todos (expandable)  â”‚   â”‚  - Approve/Iterate    â”‚
          â”‚  - Confidence          â”‚   â”‚  - Reject workflow     â”‚
          â”‚                        â”‚   â”‚                        â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  /reasoning/execute         â”‚
                    â”‚  (FastAPI Endpoint)         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AGENT REASONING (Backend) â”‚
                    â”‚   6-Stage Loop              â”‚
                    â”‚  1. Understand Goal         â”‚
                    â”‚  2. Plan Approach           â”‚
                    â”‚  3. Execute Iteration       â”‚
                    â”‚  4. Reflect on Progress     â”‚
                    â”‚  5. Should Continue?        â”‚
                    â”‚  6. Compile Response        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                  â”‚                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ LLM Client   â”‚  â”‚ Tool Registry â”‚  â”‚ Memory Mgr   â”‚
         â”‚ (Claude)     â”‚  â”‚ (30+ tools)   â”‚  â”‚ (Feedback)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Frontend Component Tree

```
App.js (45 lines)
â”‚
â”œâ”€â”€ Tab Navigation
â”‚   â”œâ”€â”€ Button: ğŸ’¬ Chat Interface
â”‚   â””â”€â”€ Button: ğŸ”§ Sandbox Workshop
â”‚
â””â”€â”€ Container
    â”‚
    â”œâ”€â”€ IF activeTab === 'chat'
    â”‚   â””â”€â”€ ChatInterface
    â”‚       â”œâ”€â”€ Header (Title, Stats, Toggle Todo)
    â”‚       â”œâ”€â”€ Messages Feed
    â”‚       â”‚   â”œâ”€â”€ Agent Messages (with timestamps)
    â”‚       â”‚   â”œâ”€â”€ User Messages (right-aligned)
    â”‚       â”‚   â””â”€â”€ Thinking Indicator (animated)
    â”‚       â”‚
    â”‚       â”œâ”€â”€ Expandable TodoList
    â”‚       â”‚   â”œâ”€â”€ Progress Bar
    â”‚       â”‚   â”œâ”€â”€ Confidence Meter
    â”‚       â”‚   â””â”€â”€ Todo Items (clickable for details)
    â”‚       â”‚
    â”‚       â””â”€â”€ Input Area
    â”‚           â”œâ”€â”€ Textarea (multiline support)
    â”‚           â””â”€â”€ Send Button
    â”‚
    â””â”€â”€ IF activeTab === 'sandbox'
        â””â”€â”€ SandboxWorkshop
            â”‚
            â”œâ”€â”€ Workshop Main
            â”‚   â”‚
            â”‚   â”œâ”€â”€ Left Panel: Conversation
            â”‚   â”‚   â”œâ”€â”€ Header (Title, Current Goal)
            â”‚   â”‚   â”œâ”€â”€ Messages Feed
            â”‚   â”‚   â”‚   â”œâ”€â”€ Agent Analysis Messages
            â”‚   â”‚   â”‚   â”œâ”€â”€ User Direction Messages
            â”‚   â”‚   â”‚   â””â”€â”€ Thinking Indicator
            â”‚   â”‚   â”‚
            â”‚   â”‚   â””â”€â”€ Input Area
            â”‚   â”‚       â”œâ”€â”€ Textarea
            â”‚   â”‚       â””â”€â”€ Send Button
            â”‚   â”‚
            â”‚   â””â”€â”€ Right Panel: Live Preview
            â”‚       â”œâ”€â”€ IF livePreview === null
            â”‚       â”‚   â””â”€â”€ Empty State (Tips)
            â”‚       â”‚
            â”‚       â””â”€â”€ IF livePreview !== null
            â”‚           â”œâ”€â”€ Header (Component Name)
            â”‚           â”œâ”€â”€ Preview Content
            â”‚           â”‚   â”œâ”€â”€ Code Snippet
            â”‚           â”‚   â””â”€â”€ Component Preview
            â”‚           â”‚
            â”‚           â””â”€â”€ Action Buttons
            â”‚               â”œâ”€â”€ âœ… Approve
            â”‚               â”œâ”€â”€ ğŸ”„ Iterate
            â”‚               â””â”€â”€ âŒ Reject
```

---

## Data Flow: Chat Interface

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Types Question in Chat Tab                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ handleSendMessage()  â”‚
    â”‚ - Get input value    â”‚
    â”‚ - Add user message   â”‚
    â”‚ - Set isThinking=trueâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ POST /reasoning/execute              â”‚
    â”‚ {goal: user input}                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Backend: AgentReasoning.reason()     â”‚
    â”‚ - 6-stage loop                       â”‚
    â”‚ - Generate findings                  â”‚
    â”‚ - Create todos list                  â”‚
    â”‚ - Calculate confidence               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Response: {success: true,            â”‚
    â”‚   result: {                          â”‚
    â”‚     message: "...",                  â”‚
    â”‚     findings: [...],                 â”‚
    â”‚     recommendations: [...],          â”‚
    â”‚     todos: [...],                    â”‚
    â”‚     confidence: 0.75                 â”‚
    â”‚   }                                  â”‚
    â”‚ }                                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Frontend Processing:                 â”‚
    â”‚ - Parse response                     â”‚
    â”‚ - Add agent message to feed          â”‚
    â”‚ - Set todos state                    â”‚
    â”‚ - Set confidence state               â”‚
    â”‚ - Set isThinking=false               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Render:                              â”‚
    â”‚ - Message appears in feed            â”‚
    â”‚ - Todos appear (collapsed)           â”‚
    â”‚ - Confidence shows in header         â”‚
    â”‚ - User can click to expand todos     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow: Sandbox Workshop

### Code Review Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User: "Review the ChatInterface code"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
             â”‚ Detect Pattern:         â”‚
             â”‚ /review|analyze|improve/â”‚
             â”‚                         â”‚
             â–¼                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚ analyzeOwnCode()           â”‚    â”‚
    â”‚ - Set isAnalyzing = true   â”‚    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
             â”‚                         â”‚
             â–¼                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ POST /reasoning/execute                â”‚
    â”‚ {goal: "Analyze Buddy's codebase..."} â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Backend Analysis           â”‚
    â”‚ (Reads files, analyzes)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Return: {message, key_findings,        â”‚
    â”‚         recommendations, confidence}   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ addMessage(message)        â”‚
    â”‚ - Findings message         â”‚
    â”‚ - Recommendations message  â”‚
    â”‚ - Set isAnalyzing = false  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Display on Left Panel:     â”‚
    â”‚ - "I found: ..."           â”‚
    â”‚ - "Key Findings:"          â”‚
    â”‚ - "What we could improve:" â”‚
    â”‚ - Recommendation list      â”‚
    â”‚                            â”‚
    â”‚ Preview stays empty (no    â”‚
    â”‚ building yet)              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ User says:                 â”‚
    â”‚ "Build [recommendation]"   â”‚
    â”‚ (triggers build mode)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Build & Preview Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User: "Build keyboard shortcuts"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
         â”‚ Detect Pattern:        â”‚
         â”‚ /build|create|make/    â”‚
         â”‚                        â”‚
         â–¼                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ buildImprovement()             â”‚ â”‚
â”‚ - Show "ğŸ”¨ Building..."        â”‚ â”‚
â”‚ - Set isAnalyzing = true       â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â”‚                         â”‚
         â–¼                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ setTimeout(...) simulates buildâ”‚
â”‚ (Phase 2: real generation)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create livePreview:                    â”‚
â”‚ {                                      â”‚
â”‚   title: "...",                        â”‚
â”‚   code: "// New component",            â”‚
â”‚   description: "Preview ready"         â”‚
â”‚ }                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ setLivePreview(preview)                â”‚
â”‚ setIsAnalyzing(false)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Right Panel Updates:                   â”‚
â”‚ âœ¨ Live Preview                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Component Name                   â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ // Code snippet                  â”‚   â”‚
â”‚ â”‚ const Component = () => ...      â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ âœ… Approve | ğŸ”„ Iterate | âŒ Rejectâ”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”œâ”€ User clicks âœ… Approve
              â”‚  â””â”€ addMessage("Done! Merged...")
              â”‚
              â”œâ”€ User clicks ğŸ”„ Iterate
              â”‚  â””â”€ addMessage("Adjusting...")
              â”‚  â””â”€ Preview updates
              â”‚
              â””â”€ User clicks âŒ Reject
                 â””â”€ addMessage("Noted, trying...")
                 â””â”€ setLivePreview(null)
```

---

## State Management in SandboxWorkshop

```
SandboxWorkshop Component State:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ messages: [                             â”‚
â”‚   {type: 'agent', content: '...'},     â”‚
â”‚   {type: 'user', content: '...'},      â”‚
â”‚   {type: 'agent', content: '...'},     â”‚
â”‚   ...                                   â”‚
â”‚ ]                                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Used by: <Messages feed rendering>      â”‚
â”‚ Updated by: addMessage()                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ input: "User typed text"                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Used by: <textarea value={input}>       â”‚
â”‚ Updated by: onChange handler            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ isAnalyzing: true | false               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Used by: Disable input, show spinner    â”‚
â”‚ Updated by: API call start/end          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ livePreview: {                          â”‚
â”‚   title: string,                        â”‚
â”‚   code: string,                         â”‚
â”‚   description: string                   â”‚
â”‚ } | null                                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Used by: Right panel render             â”‚
â”‚ Updated by: buildImprovement()          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Call Sequence

### Chat Tab Flow

```
Frontend                          Backend
   â”‚                               â”‚
   â”‚â”€â”€â”€ GET /reasoning/todos â”€â”€â”€â”€>â”‚
   â”‚<â”€â”€â”€ {todos, confidence} â”€â”€â”€â”€â”‚
   â”‚                               â”‚
   â”‚â”€â”€â”€ POST /reasoning/execute â”€>â”‚
   â”‚    {goal: "..."}              â”‚
   â”‚                               â”‚
   â”‚                   [Processing]â”‚
   â”‚                   Stage 1-6   â”‚
   â”‚                               â”‚
   â”‚<â”€â”€â”€ {message, findings, ...}â”€â”‚
   â”‚                               â”‚
   [Render response]               â”‚
   â”‚                               â”‚
```

### Sandbox Tab Flow

```
Frontend                          Backend
   â”‚                               â”‚
   â”‚â”€ User input (review type) â”€â”€>â”‚
   â”‚                               â”‚
   â”‚â”€â”€â”€ POST /reasoning/execute â”€â”€>â”‚
   â”‚    {goal: "Analyze code..."}  â”‚
   â”‚                               â”‚
   â”‚                   [Processing]â”‚
   â”‚                   Analyze files
   â”‚                   Generate findings
   â”‚                               â”‚
   â”‚<â”€â”€â”€ {message, findings} â”€â”€â”€â”€â”€â”‚
   â”‚                               â”‚
   [Show analysis in left panel]   â”‚
   â”‚                               â”‚
   â”‚â”€ User input (build type) â”€â”€â”€>â”‚
   â”‚                               â”‚
   [Simulate component generation] â”‚
   (Phase 2: actual POST /build)   â”‚
   â”‚                               â”‚
   [Show preview on right panel]   â”‚
   â”‚                               â”‚
   [User: Approve/Iterate/Reject] â”‚
   â”‚                               â”‚
```

---

## CSS Layout Hierarchy

```
.sandbox-workshop
â”œâ”€â”€ .workshop-main (flex: 1 1 auto)
â”‚   â”œâ”€â”€ .workshop-conversation (flex: 1)
â”‚   â”‚   â”œâ”€â”€ .conversation-header
â”‚   â”‚   â”œâ”€â”€ .messages-feed
â”‚   â”‚   â”‚   â””â”€â”€ .message (repeating)
â”‚   â”‚   â”‚       â”œâ”€â”€ .message-avatar
â”‚   â”‚   â”‚       â””â”€â”€ .message-body
â”‚   â”‚   â”‚           â”œâ”€â”€ .message-text
â”‚   â”‚   â”‚           â””â”€â”€ .message-time
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ .workshop-input
â”‚   â”‚       â”œâ”€â”€ textarea
â”‚   â”‚       â””â”€â”€ button
â”‚   â”‚
â”‚   â””â”€â”€ .workshop-preview (flex: 1)
â”‚       â”œâ”€â”€ .preview-empty (if no preview)
â”‚       â”‚   â””â”€â”€ .empty-state
â”‚       â”‚       â””â”€â”€ .preview-tips
â”‚       â”‚
â”‚       â””â”€â”€ .preview-container (if previewing)
â”‚           â”œâ”€â”€ .preview-header
â”‚           â”œâ”€â”€ .preview-content
â”‚           â”‚   â””â”€â”€ .preview-render
â”‚           â”‚       â””â”€â”€ .new-feature-preview
â”‚           â”‚           â”œâ”€â”€ h2
â”‚           â”‚           â””â”€â”€ .code-preview
â”‚           â”‚
â”‚           â””â”€â”€ .preview-actions
â”‚               â”œâ”€â”€ .action-approve
â”‚               â”œâ”€â”€ .action-iterate
â”‚               â””â”€â”€ .action-reject
```

---

## Responsive Breakpoints

```
Desktop (1024px+)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Conversation | Preview  â”‚
â”‚     (50%)     |  (50%)   â”‚
â”‚               |          â”‚
â”‚               |          â”‚
â”‚               |          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tablet (768-1024px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Conversation  â”‚
â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Preview     â”‚
â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mobile (<768px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Conversation  â”‚
â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Preview     â”‚
â”‚  (minimal)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Intent Detection Logic

```
Input: "Review the ChatInterface code"
       â”‚
       â–¼
isCodeReview = /review|improve|analyze|suggest|what|wrong|better|refactor/i.test()
       â”‚
       â”œâ”€ TRUE â†’ analyzeOwnCode()
       â”‚          â””â”€ POST /reasoning/execute
       â”‚          â””â”€ Parse key_findings
       â”‚          â””â”€ Parse recommendations
       â”‚          â””â”€ Show in messages
       â”‚          â””â”€ Preview = null (not building)
       â”‚
       â””â”€ FALSE
          â”‚
          â–¼
isBuildRequest = /build|create|make|implement|show|test/i.test()
          â”‚
          â”œâ”€ TRUE â†’ buildImprovement()
          â”‚          â””â”€ Simulate build (Phase 2: real)
          â”‚          â””â”€ Create livePreview
          â”‚          â””â”€ Show in right panel
          â”‚          â””â”€ Show action buttons
          â”‚
          â””â”€ FALSE â†’ conversationalResponse()
                     â””â”€ Return helpful text
                     â””â”€ Preview = null
```

---

This is the complete architecture of your new Buddy system! ğŸš€
