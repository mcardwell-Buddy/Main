BUDDY ARCHITECTURE DIAGRAM & INTEGRATION FLOW
==============================================

1. SUBSYSTEM INTERACTION MODEL (Current)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USER & FEEDBACK                                â”‚
â”‚                            â–²                                         â”‚
â”‚                            â”‚                                         â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                  â”‚                      â”‚                           â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”                      â”‚
â”‚            â”‚  Frontend  â”‚    â”‚   Response   â”‚                      â”‚
â”‚            â”‚ (Chat UI)  â”‚    â”‚  Compilation â”‚                      â”‚
â”‚            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                  â”‚                  â”‚                              â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                         â–²                                           â”‚
â”‚                         â”‚                                           â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚         â”‚               â”‚               â”‚                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”‚
â”‚    â”‚ MEMORY  â”‚  â”‚   LLM       â”‚  â”‚ SOUL      â”‚                   â”‚
â”‚    â”‚ MANAGER â”‚  â”‚  REASONING  â”‚  â”‚ (VALUES)  â”‚                   â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚               â”‚               â”‚                         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                 â”‚                                                  â”‚
â”‚                 â–¼                                                  â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚  AGENT REASONING (6-Stage Pipeline)      â”‚            â”‚
â”‚         â”‚  - Understand                             â”‚            â”‚
â”‚         â”‚  - Plan                                   â”‚            â”‚
â”‚         â”‚  - Execute Loop:                          â”‚            â”‚
â”‚         â”‚    â”œâ”€ _decide_next_action()               â”‚            â”‚
â”‚         â”‚    â”œâ”€ _simulate_tool_execution()          â”‚            â”‚
â”‚         â”‚    â”œâ”€ Reflect                             â”‚            â”‚
â”‚         â”‚    â””â”€ Decide (loop back?)                 â”‚            â”‚
â”‚         â”‚  - Respond                                â”‚            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                 â”‚                                                  â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚         â”‚                                          â”‚              â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚             â”‚
â”‚    â”‚  TOOL SELECTORâ”‚    â”‚ TOOL REGISTRY        â”‚   â”‚             â”‚
â”‚    â”‚ (Which tool?) â”‚â”€â”€â”€â–¶â”‚ (Execute tool)       â”‚   â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚             â”‚
â”‚                                   â”‚               â”‚              â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                â”‚                  â”‚              â”‚              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚ MPLOYER TOOLS â”‚  â”‚ GOHIGHLEVELâ”‚  â”‚ADDITIONAL â”‚        â”‚
â”‚         â”‚ (Selenium)    â”‚  â”‚  TOOLS     â”‚  â”‚  TOOLS    â”‚        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                â”‚                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚    â”‚           â”‚                          â”‚                    â”‚
â”‚    â–¼           â–¼                          â–¼                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚  BUDDYS_VISION_CORE  â”‚  â”‚    BUDDYS_ARMS (Selenium)â”‚       â”‚
â”‚ â”‚  (Website Inspection)â”‚  â”‚    (Click, Fill, etc)     â”‚       â”‚
â”‚ â”‚                      â”‚  â”‚                           â”‚       â”‚
â”‚ â”‚ - DOM analysis       â”‚  â”‚ - Navigate               â”‚       â”‚
â”‚ â”‚ - Element finding    â”‚  â”‚ - Click by selector      â”‚       â”‚
â”‚ â”‚ - Accessibility      â”‚  â”‚ - Fill form fields       â”‚       â”‚
â”‚ â”‚                      â”‚  â”‚ - Submit forms           â”‚       â”‚
â”‚ â”‚ Returns: Elements,   â”‚  â”‚ - Retry logic (3x)       â”‚       â”‚
â”‚ â”‚          Selectors   â”‚  â”‚ - Frame context mgr      â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â–²                           â–²                           â”‚
â”‚         â”‚                           â”‚                           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                   â”‚                                             â”‚
â”‚           ğŸ”´ PROBLEM: VISION                                   â”‚
â”‚           calls Arms.click() directly                          â”‚
â”‚           (should only return suggestions)                     â”‚
â”‚                   â”‚                                             â”‚
â”‚                   â–¼                                             â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚         â”‚  BROWSER (Selenium)  â”‚                              â”‚
â”‚         â”‚  & Website State     â”‚                              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                   â–²                                             â”‚
â”‚                   â”‚                                             â”‚
â”‚              Captured as:                                      â”‚
â”‚              - Screenshots                                     â”‚
â”‚              - Page state                                      â”‚
â”‚              - Clickables                                      â”‚
â”‚                   â”‚                                             â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚         â”‚                        â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ BROWSER VIEW  â”‚    â”‚ LIVE BROWSER    â”‚                   â”‚
â”‚  â”‚ (Screenshot)  â”‚    â”‚ (WebSocket)     â”‚                   â”‚
â”‚  â”‚ Static image  â”‚    â”‚ Streaming framesâ”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


2. CURRENT COMMUNICATION PATHS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ GOOD PATHS:
  - User â†’ Frontend â†’ Agent Reasoning (REST call)
  - Agent â†’ Tool Registry â†’ Tool execution
  - Tool â†’ Arms â†’ Browser
  - Frontend â† Agent Response (REST response)
  - Frontend â† WebSocket stream (live view)

âŒ PROBLEM PATHS:
  1. Agent calls Tool Registry directly
     Should: Agent asks Legs to execute
     Impact: No retry/timeout wrapper
  
  2. Vision calls Arms directly
     Should: Vision returns suggestions, Arms called by Legs only
     Impact: Coupled, hard to test independently
  
  3. Body modifies files directly
     Should: Body proposes, Mind approves, then modifies
     Impact: Dangerous autonomous changes
  
  4. Soul not consulted anywhere
     Should: All changes evaluated by Soul first
     Impact: No value alignment enforcement
  
  5. Tool failure â†’ web_search fallback (partially fixed)
     Should: Domain-aware fallback or escalation
     Impact: Wrong results for domain-specific goals


3. MESSAGE FLOW FOR MPLOYER TASK
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

User: "Login to Mployer and search for Maryland employers 10-500 employees"
  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
  â”‚ (REST POST /reason)
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent Reasoning (6 stages)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Stage 1: Understand                         â”‚
â”‚ â”œâ”€ Extract goal: "Mployer login & search"  â”‚
â”‚ â”œâ”€ Infer domain: "web automation"          â”‚
â”‚ â””â”€ Confidence: 0.8                         â”‚
â”‚                                             â”‚
â”‚ Stage 2: Plan                               â”‚
â”‚ â”œâ”€ Step 1: Login                           â”‚
â”‚ â”œâ”€ Step 2: Navigate to search              â”‚
â”‚ â””â”€ Step 3: Execute search                  â”‚
â”‚                                             â”‚
â”‚ Stage 3: Execute (Loop)                    â”‚
â”‚ â”œâ”€ Iteration 1                             â”‚
â”‚ â”‚  â”œâ”€ Decision: "Run mployer_login"       â”‚
â”‚ â”‚  â”œâ”€ Tool call: tool_registry('mployer_login') â”€â”€â”
â”‚ â”‚  â”‚                                               â”‚
â”‚ â”‚  â””â”€ Tool result: {success: T, screenshot...}    â”‚
â”‚ â”‚                                                  â”‚
â”‚ â”‚  â”œâ”€ Result check: success âœ“                   â”‚
â”‚ â”‚  â”œâ”€ Add findings                             â”‚
â”‚ â”‚  â””â”€ Loop iteration 1 complete                 â”‚
â”‚ â”‚                                                  â”‚
â”‚ â”œâ”€ Iteration 2                                   â”‚
â”‚ â”‚  â”œâ”€ Decision: "Run mployer_search"            â”‚
â”‚ â”‚  â””â”€ Tool result: {success: F, error: ".."}    â”‚
â”‚ â”‚     (returns failure!)                         â”‚
â”‚ â”‚                                                  â”‚
â”‚ â”‚  ğŸ”´ PROBLEM HERE:                            â”‚
â”‚ â”‚  Despite success: False, continues to Iteration 3
â”‚ â”‚  (tool result detection may not be working)   â”‚
â”‚ â”‚                                                  â”‚
â”‚ â”œâ”€ Iteration 3                                   â”‚
â”‚ â”‚  â”œâ”€ Decision: "Fallback to web_search?"      â”‚
â”‚ â”‚  â””â”€ Confidence < 0.7? (if yes, calls web_search)
â”‚ â”‚     BUT recent fix checks 'mployer' NOT in goal
â”‚ â”‚                                                  â”‚
â”‚ â””â”€ Iteration 4+: Continue or stop?              â”‚
â”‚                                                  â”‚
â”‚ Stage 4: Reflect                               â”‚
â”‚ â”œâ”€ Evaluate progress                            â”‚
â”‚ â””â”€ Update confidence                            â”‚
â”‚                                                  â”‚
â”‚ Stage 5: Decide                                 â”‚
â”‚ â”œâ”€ Continue loop? (iterations used: 3/5)       â”‚
â”‚ â””â”€ Result confidence: 0.8                       â”‚
â”‚                                                  â”‚
â”‚ Stage 6: Respond                               â”‚
â”‚ â”œâ”€ Compile findings                            â”‚
â”‚ â”œâ”€ Extract tool results                        â”‚
â”‚ â”œâ”€ Build response message                      â”‚
â”‚ â””â”€ Include reasoning steps                     â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
  â”‚ (REST response + tools_used + screenshots)
  â”‚
  â–¼
Frontend (UnifiedChat.js)
â”œâ”€ Display response message
â”œâ”€ Check: toolsUsed contains 'mployer_*'?
â”œâ”€ If yes: Create LiveBrowserView preview
â”‚  â””â”€ streamUrl: /vision/stream
â”‚
â”œâ”€ Render message with browser view
â”‚  â””â”€ LiveBrowserView opens WebSocket
â”‚     â””â”€ WebSocket polls /vision/stream
â”‚        â””â”€ Stream endpoint checks: Is Mployer scraper active?
â”‚           â””â”€ If yes: Send frame every 0.5s
â”‚           â””â”€ If no: No frames (tool already completed)
â”‚
â””â”€ Display findings to user

ğŸ”´ KEY PROBLEM:
Live view opens AFTER tool execution completes
Stream never gets frames because next tool isn't running yet
User expected to see LIVE clicking, but sees empty "Waiting..." view


4. FAILURE RECOVERY PATHS (Current vs Proposed)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

VISION FAILURE (Element not found):
  Current: Returns empty list
           Mind: "Nothing found, maybe search?"
           Result: Tries web_search (wrong!)
  
  Proposed: {success: False, error: "Element not found"}
            Mind: "Vision failed, escalate"
            Result: Ask user for clarification

ARMS FAILURE (Click didn't work):
  Current: Returns False
           Mind: "Action failed, try another tool"
           Result: web_search fallback
  
  Proposed: {success: False, reason: "Blocked by dialog"}
            Mind: "Specific failure, suggest close dialog first"
            Result: Retry with prerequisite action

TOOL NOT FOUND:
  Current: Exception caught, "Error: Tool X not found"
           Mind: Tries anyway (infinite loop?)
           Result: User sees repeated errors
  
  Proposed: Tool registry validation before calling
            Mind: Knows available tools
            Result: Graceful "Tool not available"

TIMEOUT:
  Current: No timeout (hangs indefinitely)
           Mind: Still waiting
           Result: Browser hangs, user has to reload
  
  Proposed: 30s timeout on tool execution
            Mind: "Tool took too long"
            Result: Escalate or retry with timeout flag


5. STATE MANAGEMENT (Current Problems)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Current: Implicit state via results list
  agent_reasoning.results = [
    {tool: 'mployer_login', success: T, screenshot: ...},
    {tool: 'mployer_search', success: F, ...},
    ...
  ]
  
  To check "are we logged in?":
    any(r['tool'] == 'mployer_login' and r['success'] for r in results)
  
  Problem: Fragile (depends on results list)
           Circular (depends on tool name conventions)
           Incomplete (doesn't track all state)

Proposed: Explicit state dict
  execution_state = {
    'authenticated': False,
    'current_url': 'https://mployer.com',
    'page_loaded': True,
    'form_filled': {'state': 'MD', 'employees': '10-500'},
    'search_completed': False,
    'results_available': 42,
    'last_action': 'mployer_login',
    'last_action_time': 1707158400,
    'confidence': 0.8,
    'iterations_used': 1,
    'errors': []
  }
  
  To check "are we logged in?":
    execution_state['authenticated']
  
  Better: Explicit, easy to track, works across retries


6. TOOL REGISTRY CONTRACTS (Missing)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Current: Tools return anything
  mployer_login() â†’ {success: T, screenshot: ..., ...}
  gohighlevel_tools() â†’ {status: 'ok', data: ...}
  web_search() â†’ {results: [...]}
  
  Problem: No schema, different fields, inconsistent
           Tool consumer must handle all cases

Proposed: All tools return this structure
  {
    "success": bool,
    "tool_name": str,
    "input": any,
    "output": any,
    "duration_ms": int,
    "confidence": 0.0-1.0,  # How sure are we this worked?
    "error": str | null,
    "metadata": {
      "screenshot": base64 | null,
      "page_state": {...},
      "retries": int,
      "timestamp": int
    }
  }
  
  All tools wrapped by tool_registry.call():
    1. Validate input (if schema defined)
    2. Start timer
    3. Call actual tool
    4. Validate output (if schema defined)
    5. Wrap result in standard format
    6. Return wrapped result
  
  Mind receives consistent data
  Easy to detect failures
  Easy to set confidence thresholds

================================================================================
